content:
  source:
    path: images
    dockerfile: openshift-golang-builder.Dockerfile
    git:
      branch:
        target: rhel-8-golang-1.14
      url: git@github.com:openshift/ocp-build-data.git
distgit:
  branch: rhaos-4.6-rhel-8
enabled_repos:
- rhel-8-server-ose-build-rpms
# for clang
- rhel-8-appstream-rpms

from:
  image: openshift/ose-base:ubi8

image_build_method: imagebuilder

labels:
  io.k8s.description: golang builder image for Red Hat internal builds

name: openshift/golang-builder

owners:
- aos-team-art@redhat.com

# Pushing this image to quay with this tag will cause dominoes to fall. The
# builder-base imagestream will detect the update, triggering buildconfigs
# on api.ci to create & expose new goloang images.
# Relevant PRs:
# - https://github.com/openshift/release/pull/5529
# - https://github.com/openshift/release/pull/5542
# - https://github.com/openshift/release/pull/5609
push:
  also:
  # Requires oc registry login with art-publish creds
  - registry.svc.ci.openshift.org/ocp/builder
  additional_tags:
  # DPTP will layer content on top of this image to create the upstream builder:rhel-8-golang-1.14
  - 'rhel-8-golang-1.14.art'

additional_tags:
- 'rhel_8_golang_1.14'
- 'rhel_8_1.14'
